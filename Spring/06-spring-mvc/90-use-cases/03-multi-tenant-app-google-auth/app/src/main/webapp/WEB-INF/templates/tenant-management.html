<!DOCTYPE html>
<html lang="en" th:replace="~{base :: layout(~{::main})}">

    <body>
        <main>
            <h1>Tenant Management - <span th:text="${tenant.name}">Tenant Name</span></h1>

            <section class="main-section">
                <h2>👥 Members in Tenant</h2>
                <ul th:each="member : ${tenant.members}">
                    <li>
                        <span><img th:src="${member.pictureUrl}" alt="user picture"></span>
                        <span th:text="${member.name}"></span>
                        <span th:text="${member.role}"></span>
                        <span th:if="${@tenantService.isAdmin(user.id, tenant.id)}"><a th:href="@{/tenants/{tenantId}/members/{user}/remove(tenantId=${tenant.id},user=${member.id})}">Remove User</a></span>
                    </li>
                </ul>
            </section>

            <section th:unless="${#lists.isEmpty(invitations)} == true" class="main-section">
                <h2>⌛ Pending Invitations</h2>
                <ul th:each="invitation : ${invitations}">
                    <li>
                        <span th:text="${invitation.user.name}"></span>
                        <span th:if="${@tenantService.isAdmin(user.id, tenant.id)}"><a th:href="@{/invitations/{invitationId}/decline(invitationId=${invitation.id})}">Cancel</a></span>
                    </li>
                </ul>
            </section>

            <section th:if="${@tenantService.isAdmin(user.id, tenant.id)}" class="main-section form-box">
                <h2>📨 Invite a New User</h2>
                <form method="post" th:action="@{/tenants/{tenantId}/invitations(tenantId=${tenant.id})}">
                    <div class="text-input">
                        <label for="userMail">User Mail: </label>
                        <input id="userMail" name="email" type="text">
                    </div>
                    <input type="submit" value="Invite!">
                </form>                    
            </section>
            <section th:if="${@tenantService.isAdmin(user.id, tenant.id)}" class="main-section danger-zone">
                <h2>⚠️ Delete Tenant</h2>
                <form method="get" th:action="@{/tenants/{tenantId}/delete(tenantId=${tenant.id})}">
                    <button class="danger" type="submit">Delete Tenant</button>
                </form>
                
            </section>
        </main>
        
    </body>
</html>